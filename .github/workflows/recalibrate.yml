import math

def recalibrate():
    # ... tu código previo para calcular avg_win_prob ...

    if avg_win_prob is None or math.isnan(avg_win_prob):
        print("⚠️ No hay datos válidos para recalibrar. Se omite esta ejecución.")
        return

    new_threshold = max(70, min(90, int(avg_win_prob)))
    print(f"✅ Nuevo umbral calculado: {new_threshold}")

    # guardar o actualizar en Google Sheets aquí
    # SHEET.update_cell(...)

if __name__ == "__main__":
    try:
        recalibrate()
    except Exception as e:
        print(f"❌ Error en recalibrate: {e}")
